---
title: "Project2 by Pranav Nair in ST558"
format: html
editor: visual
---


```{r}
library(shiny)
library(httr)

load_data_api <- function(latitude, longitude, user_agent) {
  url_func <- paste0("https://api.weather.gov/points/", latitude, ",", longitude)
  
  result <- GET(url_func, add_headers("User Agent" = user_agent))
  
  if(status_code(result) != 200) {
    stop("Data retrieval failed.")
  }
  
  cont <- content(result, "parsed", simplifyDataFrame = TRUE)
  url_forecast <- content$properties$forecast
  
  result_forecast <- GET(url_forecast, add_headers("User Agent" = user_agent))
  
  if(status_code(result_forecast) != 200) {
    stop("Forecast data retrieval failed.")
  }
  
  forecast_cont <- content(result_forecast, "forecast", simplifyDataFrame = TRUE)
  forecast_time <- forecast_cont$properties$periods
  
  return(forecast_time)
  
}


load_data_forecast <- function(forecast_time, user_agent) {
  result <- GET(forecast_time, add_headers("User Agent" = user_agent))
  if(status_code(result_forecast) != 200) {
    stop("Forecast data retrieval failed.")
  }
  
  forecast_cont <- content(result, "parsed", simplifyDataFrame = TRUE)
  
}

latitude <- "39.7456"
longitude <- "-97.0892"
user_agent <- "Pranav Nair (blahblah@example.com)"

forecast <- load_data_api(latitude, longitude, user_agent)
print(forecast)
  
  

```


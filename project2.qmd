---
title: "Project2 by Pranav Nair in ST558"
format: html
editor: visual
---


```{r}
library(shiny)
library(httr)
library(jsonlite)

load_data_api <- function(latitude, longitude, user_agent) {
  url <- "https://api.weather.gov/points/"
  url_func <- paste0(url, latitude, ",", longitude)
  
  result <- GET(url_func, add_headers("User-Agent" = user_agent))
  
  if(status_code(result) != 200) {
    stop("Data retrieval failed.")
  }
  
  content <- content(result, "parsed", type = "application/json", simplifyDataFrame = TRUE)
  url_forecast <- content$properties$forecast
  
  return(url_forecast)
}
  
load_forecast <- function(url_forecast, user_agent) {
  result <- GET(url_forecast, add_headers("User-Agent" = user_agent))
  
  if(status_code(result) != 200) {
    stop("Forecast data retrieval failed.")
  }
  
  content <- content(result, "parsed", type = "application/json", simplifyDataFrame = TRUE)
  forecast_time <- content$properties$periods
  
  return(forecast_time)
  
}

total_wrapper <- function(latitude, longitude, user_agent) {
  url_forecast <- load_data_api(latitude, longitude, user_agent)
  forecast_time <- load_forecast(url_forecast, user_agent)
  
  return(forecast_time)
}


latitude <- "38.8894"
longitude <- "-77.0352"
user_agent <- "Pranav Nair (blahblah@example.com)"

forecast <- total_wrapper(latitude, longitude, user_agent)
print(forecast)
  

#contingency tables

str(forecast)
table(forecast$temperature)
table(forecast$windSpeed)


#numerical summaries


#at least 4 plots

  

```

